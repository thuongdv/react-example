FROM haproxy:3.3.1-alpine

# Copy local HAProxy configuration (without AWS resolver)
COPY docker/haproxy.local.cfg /usr/local/etc/haproxy/haproxy.cfg

# Copy self-signed certificates
COPY docker/certs /usr/local/etc/haproxy/certs/

# Expose ports (80 for HTTP redirect, 443 for HTTPS)
EXPOSE 80 443

# Run HAProxy
CMD ["haproxy", "-f", "/usr/local/etc/haproxy/haproxy.cfg"]
